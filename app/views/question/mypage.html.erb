<div class="wrapper">
  <h1>マイクエスト</h1>

  <!-- モーダルを開くボタン -->
  <button class="js-open simplebutton">クエストを作る</button>

  <!-- オーバーレイ -->
  <div id="overlay" class="overlay"></div>
  <!-- モーダルウィンドウ -->
  <div class="modal-window">
    <%= form_tag("/question/create") do %>
      <div class="form">
        <h2>クエスト名</h2>
        <textarea name="title"><%= @quest.title %></textarea>
        <h2>説明文</h2>
        <textarea name="caption"><%= @quest.caption %></textarea>
        <div class="form-buttons">
            <a class="js-close simplebutton">Close</a>
            <input type="submit" value="作成" class="simplebutton">
        </div>
      </div>
    <% end %>
  </div>

  <h2>未公開</h2>
  <% if @not_published_quests.size != 0 %>
    <ul class="simple-list">
      <% @not_published_quests.each do |quest|%>
        <li class="quest-list">
          <div class="quest-list-block">
            <%= link_to(quest.title, "/question/#{quest.id}", {class: "textbutton quest-list-title"}) %>
            <p class="quest-list-caption"><%= quest.caption %></p>
          </div>
        </li>
      <% end %>
    </ul>
  <% else %>
    <p>非公開のクエストはありません</p>
  <% end %>
  
  <h2>公開中</h2>
  <% if @published_quests.size != 0 %>
    <ul class="simple-list">
      <% @published_quests.each do |quest|%>
        <li class="quest-list">
          <div class="quest-list-block">
            <%= link_to(quest.title, "/question/#{quest.id}", {class: "textbutton quest-list-title"}) %>
            <p class="quest-list-caption"><%= quest.caption %></p>
          </div>
        </li>
      <% end %>
    </ul>
  <% else %>
    <p>公開中のクエストはありません</p>
  <% end %>

  <h2>挑戦中</h2>
  <% if @play_quest %>
    <ul class="simple-list">
      <li class="quest-list">
        <div class="quest-list-block">
          <%= link_to(@play_quest.title, "/question/#{@play_quest.id}", {class: "textbutton quest-list-title"}) %>
          <p class="quest-list-caption"><%= @play_quest.caption %></p>
        </div>
      </li>
    </ul>
  <% else %>
    <p>挑戦中のクエストはありません</p>
  <% end %>
</div>

<script type="text/javascript">
  $(function () {
    $('.js-open').click(function () {
      $('#overlay, .modal-window').fadeIn();
    });

    $('.js-close, #overlay').click(function () {
      $('#overlay, .modal-window').fadeOut();
    });
  });
</script>